<!-- Alpine.js -->
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

<nav class="bg-gray-900 text-white px-4 py-3">
  <div class="max-w-screen-xl mx-auto flex items-center justify-between">
    
    <!-- Left: Logo -->
    <div class="flex items-center">
      <a href="/" class="text-xl font-bold">Blogify</a>
    </div>

    <!-- Center: Navigation links -->
    <div class="hidden md:flex space-x-6 absolute left-1/2 transform -translate-x-1/2">
      <a href="/" class="text-blue-500 font-medium hover:text-blue-400">Home</a>
      <% if (locals.user) { %>
        <a href="/addBlog" class="font-medium hover:text-gray-300">Add Blog</a>
      <% } %>
    </div>

    <!-- Right: User dropdown -->
    <div x-data="{ open: false }" class="relative">
      <% if (locals.user) { %>
      <button @click="open = !open"
              class="flex items-center gap-2 font-medium hover:text-blue-400 focus:outline-none">
        <%= locals.user.fullName %>
        <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
          <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M1 1l4 4 4-4"/>
        </svg>
      </button>

      <!-- Dropdown -->
      <div x-show="open" @click.outside="open = false"
           class="absolute right-0 mt-2 w-40 rounded-md shadow-lg bg-white text-gray-800 dark:bg-gray-800 dark:text-white z-50"
           x-cloak>
        <a href="/logout" class="block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700">Log Out</a>
      </div>
      <% } else { %>
      <!-- Show login/signup when not logged in -->
      <div class="space-x-2">
        <a href="/signup"
           class="bg-blue-700 hover:bg-blue-800 text-white px-4 py-2 rounded-md text-sm font-medium">Create Account</a>
        <a href="/signin"
           class="border border-gray-300 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-800">Sign In</a>
      </div>
      <% } %>
    </div>
  </div>
</nav>
